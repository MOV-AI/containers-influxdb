# InfluxDB Configuration
# Optimized for production workloads and IoT data collection

# Disable usage reporting to InfluxData
reporting-disabled = true

# Meta store configuration
[meta]
  # Directory for meta store
  dir = "/var/lib/influxdb/meta"
  # Disable meta logging for performance (enable for debugging)
  logging-enabled = false

# Data store configuration
[data]
  # Directory for time series data
  dir = "/var/lib/influxdb/data"
  # Storage engine (tsm1 is the default and recommended)
  engine = "tsm1"
  # Write-ahead log directory
  wal-dir = "/var/lib/influxdb/wal"
  # Enable query logging (useful for debugging performance issues)
  query-log-enabled = true
  # Disable trace logging for performance (enable for debugging)
  trace-logging-enabled = false
  # Maximum series allowed per database (0 = unlimited)
  max-series-per-database = 0
  # Maximum values per tag (0 = unlimited)
  max-values-per-tag = 0

# Retention policy enforcement
[retention]
  # Enable automatic cleanup of expired data
  enabled = true
  # How often to check for expired data
  check-interval = "30m"

# Shard precreation
[shard-precreation]
  # Enable automatic shard precreation
  enabled = true
  # How often to check if new shards need to be created
  check-interval = "10m"
  # How far in advance to create shards
  advance-period = "30m"

# Internal monitoring (disabled for performance)
[monitor]
  # Whether to record statistics internally
  store-enabled = false
  # Database to store internal metrics
  store-database = "_internal"
  # How often to record statistics
  store-interval = "10s"

# HTTP API configuration
[http]
  # Enable HTTP API (required for normal operation)
  enabled = true
  # Bind address for HTTP API
  bind-address = ":8086"
  # Enable HTTPS (configure cert files for production)
  https-enabled = false
  # Disable HTTP request logging for performance (enable for debugging)
  log-enabled = false
  # Enable pprof HTTP endpoint for troubleshooting and monitoring
  pprof-enabled = true
  # Enable debug endpoints (disable in production if not needed)
  debug-pprof-enabled = false
  # HTTPS certificate (uncomment and set paths for HTTPS)
  # https-certificate = "/etc/ssl/influxdb.pem"
  # https-private-key = "/etc/ssl/influxdb-key.pem"

# Logging configuration
[logging]
  # Log format: auto, logfmt, json
  format = "auto"
  # Log level: error, warn, info, debug
  level = "info"
  # Suppress logo (set to true for cleaner logs)
  suppress-logo = false

# Continuous queries (if using CQs)
[continuous_queries]
  # Enable continuous queries
  enabled = true
  # How often to check for CQs that need to run
  run-interval = "1s"

# RPC service for backup/restore
[[udp]]
  # Enable UDP listener (uncomment if needed)
  # enabled = false
  # bind-address = ":8089"
  # database = "udp"